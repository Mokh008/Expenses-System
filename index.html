<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªÙ‚Ø¯ÙŠÙ… Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¥Ø¹Ø§Ø´Ø©</title>

<style>
:root{
  --primary:#0F172A;
  --secondary:#1E293B;
  --accent:#22C55E;
  --bg:#F8FAFC;
  --text:#020617;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family: "Segoe UI", Tahoma, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}

.container{
  max-width:480px;
  margin:60px auto;
  background:#fff;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.1);
  padding:30px;
}

h1{
  margin:0 0 10px;
  text-align:center;
  color:var(--primary);
}

.subtitle{
  text-align:center;
  color:#64748B;
  margin-bottom:30px;
}

.field{
  margin-bottom:20px;
}

label{
  display:block;
  margin-bottom:6px;
  font-weight:600;
}

input, select, button{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #CBD5E1;
  font-size:15px;
}

input:focus, select:focus{
  outline:none;
  border-color:var(--accent);
}

button{
  background:var(--primary);
  color:#fff;
  border:none;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}

button:hover{
  background:#020617;
}

.days-box{
  margin-top:25px;
  display:none;
}

.day{
  padding:10px;
  border:1px solid #E5E7EB;
  border-radius:8px;
  margin-bottom:8px;
  display:flex;
  align-items:center;
  gap:10px;
}

.summary{
  margin-top:20px;
  padding:15px;
  background:#F1F5F9;
  border-radius:10px;
  display:none;
}

.summary div{
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
}

.footer{
  text-align:center;
  margin-top:25px;
  font-size:13px;
  color:#64748B;
}
</style>
</head>

<body>

<div class="container">
  <h1>ØªÙ‚Ø¯ÙŠÙ… Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¥Ø¹Ø§Ø´Ø©</h1>
  <div class="subtitle">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯Ù‚Ø©</div>

  <div class="field">
    <label>Ø±Ù‚Ù… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ (ID)</label>
    <input type="number" id="empId" placeholder="Ù…Ø«Ø§Ù„: 1001730">
  </div>

  <div class="field">
    <label>Ø§Ù„Ø´Ù‡Ø±</label>
    <select id="month">
      <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø± --</option>
      <option value="1">ÙŠÙ†Ø§ÙŠØ±</option>
      <option value="2">ÙØ¨Ø±Ø§ÙŠØ±</option>
      <option value="3">Ù…Ø§Ø±Ø³</option>
      <option value="4">Ø£Ø¨Ø±ÙŠÙ„</option>
      <option value="5">Ù…Ø§ÙŠÙˆ</option>
      <option value="6">ÙŠÙˆÙ†ÙŠÙˆ</option>
      <option value="7">ÙŠÙˆÙ„ÙŠÙˆ</option>
      <option value="8">Ø£ØºØ³Ø·Ø³</option>
      <option value="9">Ø³Ø¨ØªÙ…Ø¨Ø±</option>
      <option value="10">Ø£ÙƒØªÙˆØ¨Ø±</option>
      <option value="11">Ù†ÙˆÙÙ…Ø¨Ø±</option>
      <option value="12">Ø¯ÙŠØ³Ù…Ø¨Ø±</option>
    </select>
  </div>

  <button onclick="loadAttendance()">ØªØ­Ù…ÙŠÙ„ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ±</button>

  <div class="days-box" id="daysBox"></div>

  <div class="summary" id="summary">
    <div><span>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…</span><strong id="daysCount">0</strong></div>
    <div><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><strong id="total">0 EGP</strong></div>
  </div>

  <button style="margin-top:20px;display:none" id="submitBtn">
    Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª
  </button>

  <div class="footer">
    Ù†Ø¸Ø§Ù… Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¥Ø¹Ø§Ø´Ø©
  </div>
</div>

<script>
/* ğŸ”— Backend URL */
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyLiJa1vJ6QKIc0GgY03eSPiTWBsXTKix-04yMQ5tOBpbGYEWxD5Q674qxw4_KpaQgW/exec";

/* ØªØ­Ù…ÙŠÙ„ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± */
function loadAttendance(){
  const id = document.getElementById("empId").value;
  const month = document.getElementById("month").value;

  if(!id || !month){
    alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ ÙˆØ§Ù„Ø´Ù‡Ø±");
    return;
  }

  const box = document.getElementById("daysBox");
  box.style.display="block";
  box.innerHTML="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";

  fetch(`${WEB_APP_URL}?id=${id}&month=${month}`)
    .then(res => res.json())
    .then(data => {
      box.innerHTML="";

      if(data.error){
        box.innerHTML = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
        return;
      }

      if(data.length === 0){
        box.innerHTML = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙŠØ§Ù… Ø­Ø¶ÙˆØ± Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±";
        return;
      }

      data.forEach(d=>{
        box.innerHTML += `
          <div class="day">
            <input type="checkbox" onchange="calc()">
            <span>${d.date} (${d.day})</span>
          </div>
        `;
      });
    })
    .catch(()=>{
      box.innerHTML="Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„";
    });
}

/* Ø§Ù„Ø­Ø³Ø§Ø¨ */
function calc(){
  const checks = document.querySelectorAll(".day input:checked");
  const days = checks.length;

  document.getElementById("summary").style.display="block";
  document.getElementById("submitBtn").style.display="block";

  document.getElementById("daysCount").innerText = days;
  document.getElementById("total").innerText = (days * 200) + " EGP";
}
</script>

</body>
</html>
